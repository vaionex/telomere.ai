const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/ZY6MWh56.js","../chunks/BDPGcIsz.js","../chunks/CQIrhnDL.js"])))=>i.map(i=>d[i]);
import{a as V,f as N}from"../chunks/DXC3ax9b.js";import"../chunks/hB9PhI9p.js";import{p as G,au as U,k as m,t as P,a as L,g as k,c as _,aB as S,s as I,r as D,n as E,e as B,$ as j}from"../chunks/mFslsiFm.js";import{h as Y}from"../chunks/BQEwZJ2C.js";import{_ as $}from"../chunks/Dp1pzeXC.js";import{s as z}from"../chunks/BpggGyi-.js";import{i as O}from"../chunks/C1VlIKkJ.js";import{d as q,e as H,a as R}from"../chunks/D-9SZUtk.js";import{s as J}from"../chunks/uYewLRfG.js";import{s as K}from"../chunks/D_yIditj.js";import{r as Q,f as X}from"../chunks/CJ_hOr_p.js";import{g as Z}from"../chunks/CuYi9sGH.js";function tt(p){const n=p.split(`
`).slice(0,50);for(const o of n){const e=o.trim();if(e.startsWith("##fileformat=VCF")||e.startsWith("#CHROM"))return"vcf";if(e.includes("23andMe")||e.includes("23andme"))return"twentythree";if(e.includes("AncestryDNA"))return"ancestry";if(e.includes("MyHeritage"))return"myheritage"}for(const o of n){const e=o.trim();if(e.startsWith("#")||e==="")continue;const l=e.split("	"),d=e.split(",");if(l.length===4&&l[0].startsWith("rs"))return"twentythree";if(l.length===5&&l[0].startsWith("rs"))return"ancestry";if(d.length>=4&&d[0].replace(/"/g,"").startsWith("rs"))return"myheritage";break}return null}function et(p){const n=new Map,o=new Set;let e=null;const l=p.split(`
`);for(const d of l){const i=d.trim();if(i.startsWith("#")){const g=i.match(/build\s*(\d+)/i);g&&(e=parseInt(g[1]));continue}if(i===""||i.startsWith("rsid	")||i.startsWith("rsid "))continue;const h=i.split("	");if(h.length<4)continue;const[s,f,w,u]=h;if(!s.startsWith("rs")&&!s.startsWith("i")||u==="--"||u==="00")continue;const x=u.charAt(0),c=u.length>1?u.charAt(1):x;o.add(f),n.set(s,{chromosome:f,position:parseInt(w),genotype:u,allele1:x,allele2:c})}return{format:"twentythree",snps:n,metadata:{totalSnps:n.size,chromosomeCount:o.size,buildVersion:e||37}}}function st(p){const n=new Map,o=new Set;let e=null;const l=p.split(`
`);for(const d of l){const i=d.trim();if(i.startsWith("#")){const g=i.match(/build\s*(\d+)/i);g&&(e=parseInt(g[1]));continue}if(i===""||i.startsWith("rsid	")||i.toLowerCase().startsWith("rsid	"))continue;const h=i.split("	");if(h.length<5)continue;const[s,f,w,u,x]=h;if(!s.startsWith("rs")&&!s.startsWith("i")||u==="0"&&x==="0")continue;const c=u+x;o.add(f),n.set(s,{chromosome:f,position:parseInt(w),genotype:c,allele1:u,allele2:x})}return{format:"ancestry",snps:n,metadata:{totalSnps:n.size,chromosomeCount:o.size,buildVersion:e||37}}}function nt(p){const n=new Map,o=new Set;let e=null;const l=p.split(`
`);let d=!1,i=",";for(const h of l){const s=h.trim();if(s.startsWith("#")||s.startsWith('"#')){const M=s.match(/build\s*(\d+)/i);M&&(e=parseInt(M[1]));continue}if(s==="")continue;if(!d&&(s.toUpperCase().includes("RSID")||s.toUpperCase().includes("SNP"))){s.includes("	")?i="	":i=",",d=!0;continue}d=!0;const f=s.replace(/"/g,"").split(i).map(M=>M.trim());if(f.length<4)continue;const w=f[0],u=f[1],x=f[2],c=f[3];if(!w.startsWith("rs")&&!w.startsWith("i")||c==="--"||c==="00")continue;const g=c.charAt(0),A=c.length>1?c.charAt(1):g;o.add(u),n.set(w,{chromosome:u,position:parseInt(x),genotype:c,allele1:g,allele2:A})}return{format:"myheritage",snps:n,metadata:{totalSnps:n.size,chromosomeCount:o.size,buildVersion:e||37}}}function at(p){const n=new Map,o=new Set;let e=null;const l=p.split(`
`);let d=-1;for(const i of l){const h=i.trim();if(h.startsWith("##")){const C=h.match(/##reference.*?(?:GRCh|hg)(\d+)/i);C&&(e=parseInt(C[1]));continue}if(h.startsWith("#CHROM")){d=h.split("	").length>9?9:-1;continue}if(h==="")continue;const s=h.split("	");if(s.length<8)continue;const f=s[0].replace("chr",""),w=s[1],u=s[2],x=s[3],c=s[4];s[6];let g=x,A=x;if(d>=0&&s.length>d){const C=s[8]||"",T=s[d]||"",t=C.split(":"),r=T.split(":"),a=t.indexOf("GT");if(a>=0&&a<r.length){const v=r[a],W=[x,...c.split(",")],b=v.split(/[/|]/);if(b.length>=1){const y=parseInt(b[0]);!isNaN(y)&&y<W.length&&(g=W[y])}if(b.length>=2){const y=parseInt(b[1]);!isNaN(y)&&y<W.length&&(A=W[y])}}}const M=g+A,F=u!=="."?u:`chr${f}:${w}`;o.add(f),n.set(F,{chromosome:f,position:parseInt(w),genotype:M,allele1:g,allele2:A})}return{format:"vcf",snps:n,metadata:{totalSnps:n.size,chromosomeCount:o.size,buildVersion:e||38}}}function rt(p){const n=tt(p);if(!n)throw new Error("Unable to detect file format. Supported: 23andMe, AncestryDNA, MyHeritage, VCF");switch(n){case"twentythree":return et(p);case"ancestry":return st(p);case"myheritage":return nt(p);case"vcf":return at(p);default:throw new Error(`Unsupported format: ${n}`)}}var it=N('<div class="space-y-4"><div class="w-16 h-16 mx-auto rounded-full border-4 border-accent-cyan/30 border-t-accent-cyan animate-spin"></div> <p class="text-text-primary font-semibold">Parsing your genetic data...</p> <div class="w-64 mx-auto h-2 bg-white/5 rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-accent-cyan to-accent-blue rounded-full transition-all duration-500"></div></div> <p class="text-text-secondary text-sm">Processing locally â€” your data never leaves this device</p></div>'),ot=N('<div class="space-y-4"><div class="w-16 h-16 mx-auto rounded-full glass flex items-center justify-center"><svg class="w-8 h-8 text-accent-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg></div> <div><p class="text-text-primary font-semibold text-lg"> </p> <p class="text-text-secondary text-sm mt-1"> </p></div> <div class="flex items-center justify-center gap-4 text-text-tertiary text-xs"><span>ğŸ”’ 100% local processing</span> <span>â€¢</span> <span>ğŸ“ .txt, .csv, .vcf</span> <span>â€¢</span> <span>âš¡ Instant parsing</span></div></div>'),ct=N('<p class="mt-4 text-accent-red text-sm"> </p>'),lt=N('<div role="button" tabindex="0"><input id="file-input" type="file" accept=".txt,.csv,.vcf,.tsv,.zip" class="hidden"/> <!> <!></div>');function dt(p,n){G(n,!0);let o=S(!1),e=S(!1),l=S(0),d=S(""),i=S(!1);U(()=>{m(i,typeof window<"u"&&!!window.__TAURI_INTERNALS__,!0)});async function h(t,r){m(d,""),m(e,!0),m(l,30);try{await new Promise(v=>setTimeout(v,200));const a=rt(t);m(l,80),await new Promise(v=>setTimeout(v,200)),Q.set(a.snps),X.set({format:a.format,totalSnps:a.metadata.totalSnps,chromosomeCount:a.metadata.chromosomeCount,buildVersion:a.metadata.buildVersion,fileName:r}),m(l,100),await new Promise(v=>setTimeout(v,400)),Z("/dashboard")}catch(a){m(d,a.message,!0),m(e,!1),m(l,0)}}async function s(){try{const{open:t}=await $(async()=>{const{open:y}=await import("../chunks/ZY6MWh56.js");return{open:y}},__vite__mapDeps([0,1]),import.meta.url),{readTextFile:r}=await $(async()=>{const{readTextFile:y}=await import("../chunks/CQIrhnDL.js");return{readTextFile:y}},__vite__mapDeps([2,1]),import.meta.url),a=await t({title:"Open Genetic Data File",multiple:!1,filters:[{name:"Genetic Data",extensions:["txt","csv","vcf","tsv"]},{name:"All Files",extensions:["*"]}]});if(!a)return;m(l,10),m(e,!0);const v=typeof a=="string"?a:a.path,W=await r(v),b=v.split(/[/\\]/).pop()||"unknown";await h(W,b)}catch(t){m(d,t.message,!0),m(e,!1),m(l,0)}}async function f(t){if(!t)return;m(l,10),m(e,!0);const r=await t.text();await h(r,t.name)}function w(t){var r,a;t.preventDefault(),m(o,!1),f((a=(r=t.dataTransfer)==null?void 0:r.files)==null?void 0:a[0])}function u(t){var r;f((r=t.target.files)==null?void 0:r[0])}function x(){var t;k(i)?s():(t=document.getElementById("file-input"))==null||t.click()}var c=lt(),g=_(c),A=I(g,2);{var M=t=>{var r=it(),a=I(_(r),4),v=_(a);D(a),E(2),D(r),P(()=>K(v,`width: ${k(l)??""}%`)),V(t,r)},F=t=>{var r=ot(),a=I(_(r),2),v=_(a),W=_(v,!0);D(v);var b=I(v,2),y=_(b);D(b),D(a),E(2),D(r),P(()=>{z(W,k(i)?"Click to open your genetic data file":"Drop your genetic data file here"),z(y,`${k(i)?"Select":"or click to browse"} â€¢ 23andMe, AncestryDNA, MyHeritage, VCF supported`)}),V(t,r)};O(A,t=>{k(e)?t(M):t(F,!1)})}var C=I(A,2);{var T=t=>{var r=ct(),a=_(r,!0);D(r),P(()=>z(a,k(d))),V(t,r)};O(C,t=>{k(d)&&t(T)})}D(c),P(()=>J(c,1,`relative rounded-xl border-2 border-dashed transition-all duration-200 p-12 text-center cursor-pointer ${k(o)?"border-accent-cyan bg-accent-cyan/5":"border-white/10 hover:border-white/20"}`)),H("dragover",c,t=>{t.preventDefault(),m(o,!0)}),H("dragleave",c,()=>m(o,!1)),H("drop",c,w),R("click",c,x),R("keydown",c,t=>t.key==="Enter"&&x()),R("change",g,u),V(p,c),L()}q(["click","keydown","change"]);var pt=N('<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-24"><div class="text-center mb-12"><h1 class="text-4xl font-bold mb-4">Open Your <span class="gradient-text">Genetic Data</span></h1> <p class="text-text-secondary max-w-xl mx-auto">Your file is processed entirely on this device. Nothing is ever sent to any server.</p></div> <!> <div class="mt-12 grid sm:grid-cols-3 gap-6"><div class="card text-center"><span class="text-2xl mb-2 block">ğŸ–¥ï¸</span> <h3 class="font-semibold text-sm mb-1">100% Local</h3> <p class="text-text-tertiary text-xs">Processed on your computer. Works offline.</p></div> <div class="card text-center"><span class="text-2xl mb-2 block">âš¡</span> <h3 class="font-semibold text-sm mb-1">Instant Analysis</h3> <p class="text-text-tertiary text-xs">Parse 500,000+ SNPs in seconds.</p></div> <div class="card text-center"><span class="text-2xl mb-2 block">ğŸ“Š</span> <h3 class="font-semibold text-sm mb-1">6 Report Types</h3> <p class="text-text-tertiary text-xs">Health, longevity, nutrition, pharma, traits, and carrier status.</p></div></div> <div class="mt-12 card"><h3 class="font-semibold mb-3">How to get your raw data</h3> <div class="space-y-2 text-sm text-text-secondary"><p><strong class="text-text-primary">23andMe:</strong> Settings â†’ 23andMe Data â†’ Download Raw Data</p> <p><strong class="text-text-primary">AncestryDNA:</strong> Settings â†’ Download DNA Data â†’ Confirm & Download</p> <p><strong class="text-text-primary">MyHeritage:</strong> DNA â†’ Manage DNA kits â†’ Download raw DNA data</p> <p><strong class="text-text-primary">VCF:</strong> Any VCF 4.x file from a genetic testing provider or research study.</p></div></div></div>');function At(p){var n=pt();Y("tziouu",e=>{B(()=>{j.title="Open Genetic Data â€” Telomere AI"})});var o=I(_(n),2);dt(o,{}),E(4),D(n),V(p,n)}export{At as component};
